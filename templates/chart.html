<!DOCTYPE html>
<html>
  <head>
    <title>{{title}}</title>

    <style>
     .red {
       background-color: #FFECEC;
     }
     .container {
       margin-top: 1.0rem;
       overflow-x: auto;
       white-space: nowrap;
     }
     .container_lbl {
       font-size: x-large;
       font-weight: bold;
     }
     .section {
       margin-top: 2.0rem;
       margin-bottom: 2.0rem;
     }
     .section_lbl {
       font-size: large;
       font-weight: bold;
     }
     table {
       margin-top: 1.5rem;
       border: 2px solid darkgrey;
       border-collapse: collapse;
     }
     th, td {
       border: 1px solid darkgrey;
       border-collapse: collapse;
       padding: 0.75em;
       text-align: center;
     }
     .matchup {
       width: 14.0rem;
     }
     .bye {
       width: 12.0rem;
     }
     .score {
       width: 1.0rem;
     }
     .hor_sect {
       border-bottom: 2px solid darkgrey;
     }
     .vert_sect {
       border-left: 2px solid darkgrey;
     }
     .plyr_lbl,
     .team_lbl{
       text-align: left;
       width: 10em;
     }
     .tally {
       vertical-align: bottom;
     }
     b {
       font-weight: bold;
       color: {{bold_color or "black"}};
     }
     u {
       text-decoration: solid underline grey 1px;
     }
     .u2 {
       text-decoration: solid underline grey 2px;
     }
    </style>
  </head>

  <body>
    <div class="container">
      <span class="container_lbl">{{tourn.name}} &ndash; {{title}}</span>

      {% if chart_num == 0 %}
      <div class="section seed_bracket">
        <table>
          <thead>
            <tr>
              <th class="hor_sect">Round</th>
              <th class="hor_sect vert_sect">Table 1</th>
              {% for tbl in range(2, rnd_tables + 1) %}
              <th class="hor_sect matchup">Table {{tbl}}</th>
              {% endfor %}
              {% if rnd_byes %}
              <th class="hor_sect bye">Bye</th>
              {% endif %}
            </tr>
          </thead>
          <tbody>
            {% for rnd in range(1, rnds + 1) %}
            <tr>
              <td>{{rnd}}</td>
              <td class="vert_sect">{{matchups[rnd][1]|safe}}</td>
              {% for tbl in range(2, rnd_tables + 1) %}
              <td>{{matchups[rnd][tbl]|safe}}</td>
              {% endfor %}
              {% if rnd_byes %}
              <td>{{matchups[rnd].get(None)|safe}}</td>
              {% endif %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endif %}

      {% if chart_num == 1 %}
      <div class="section seed_scores">
        <table>
          <thead>
            <tr>
              <th class="plyr_lbl hor_sect" rowspan="2">Player (by Num)</th>
              <th class="hor_sect" rowspan="2">Wins</th>
              <th class="hor_sect" rowspan=2>Losses</th>
              <th class="vert_sect" colspan="{{rnds}}">Points For (by Round)</th>
              <th class="vert_sect" colspan="{{rnds}}">Points Against (by Round)</th>
              <th class="hor_sect vert_sect" rowspan="2">Win Pct</th>
              <th class="hor_sect" rowspan=2>Pts Pct</th>
              <th class="hor_sect" rowspan=2>Rank</th>
            </tr>
            <tr>
              <th class="hor_sect vert_sect score">1</th>
              {% for rnd in range(2, rnds + 1) %}
              <th class="hor_sect score">{{rnd}}</th>
              {% endfor %}
              <th class="hor_sect vert_sect score">1</th>
              {% for rnd in range(2, rnds + 1) %}
              <th class="hor_sect score">{{rnd}}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for pl in players %}
            <tr>
              <td class="plyr_lbl">{{pl.player_tag|safe}}</td>
              <td class="tally"><img {{win_tallies[pl.player_num]|safe}} /></td>
              <td class="tally"><img {{loss_tallies[pl.player_num]|safe}} /></td>
              <td class="vert_sect">{{team_pts[pl.player_num].get(1, '')|safe}}</td>
              {% for rnd in range(2, rnds + 1) %}
              <td>{{team_pts[pl.player_num].get(rnd, '')|safe}}</td>
              {% endfor %}
              <td class="vert_sect">{{opp_pts[pl.player_num].get(1, '')|safe}}</td>
              {% for rnd in range(2, rnds + 1) %}
              <td>{{opp_pts[pl.player_num].get(rnd, '')|safe}}</td>
              {% endfor %}
              <td class="vert_sect">{{fmt_stat(pl.seed_win_pct)|safe}}</td>
              <td>{{fmt_stat(pl.seed_pts_pct)|safe}}</td>
              <td>{{fmt_stat(pl.player_rank)|safe}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endif %}

      {% if chart_num == 2 %}
      {% for div in div_list %}
      <div class="section rr_brackets">
        <span class="section_lbl">Division {{div}}</span>
        <table>
          <thead>
            <tr>
              <th class="hor_sect">Round</th>
              <th class="hor_sect vert_sect matchup">Table 1</th>
              {% for tbl in range(2, div_tables[div] + 1) %}
              <th class="hor_sect matchup">Table {{tbl}}</th>
              {% endfor %}
              {% if div_byes[div] %}
              <th class="hor_sect bye">Bye</th>
              {% endif %}
            </tr>
          </thead>
          <tbody>
            {% for rnd in range(1, rnds + 1) %}
            <tr>
              <td>{{rnd}}</td>
              <td class="vert_sect">{{matchups[div][rnd][1]|safe}}</td>
              {% for tbl in range(2, div_tables[div] + 1) %}
              <td>{{matchups[div][rnd][tbl]|safe}}</td>
              {% endfor %}
              {% if div_byes[div] %}
              <td>{{matchups[div][rnd].get(None)|safe}}</td>
              {% endif %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endfor %}
      {% endif %}

      {% if chart_num == 3 %}
      {% for div in div_list %}
      <div class="section rr_scores">
        <span class="section_lbl">Division {{div}}</span>
        <table>
          <thead>
            <tr>
              <th class="plyr_lbl hor_sect" rowspan="2">Team (by Div Seed)</th>
              <th class="hor_sect" rowspan="2">Wins</th>
              <th class="hor_sect" rowspan=2>Losses</th>
              <th class="vert_sect" colspan="{{rnds}}">Points For (by Round)</th>
              <th class="vert_sect" colspan="{{rnds}}">Points Against (by Round)</th>
              <th class="hor_sect vert_sect" rowspan="2">Win Pct</th>
              <th class="hor_sect" rowspan=2>Pts Pct</th>
              <th class="hor_sect" rowspan=2>Rank</th>
            </tr>
            <tr>
              <th class="hor_sect vert_sect score">1</th>
              {% for rnd in range(2, rnds + 1) %}
              <th class="hor_sect score">{{rnd}}</th>
              {% endfor %}
              <th class="hor_sect vert_sect score">1</th>
              {% for rnd in range(2, rnds + 1) %}
              <th class="hor_sect score">{{rnd}}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for tm in div_teams[div] %}
            <tr>
              <td class="team_lbl">{{tm.team_tag|safe}}</td>
              <td class="tally"><img {{win_tallies[tm.id]|safe}} /></td>
              <td class="tally"><img {{loss_tallies[tm.id]|safe}} /></td>
              <td class="vert_sect">{{team_pts[tm.id].get(1, '')|safe}}</td>
              {% for rnd in range(2, rnds + 1) %}
              <td>{{team_pts[tm.id].get(rnd, '')|safe}}</td>
              {% endfor %}
              <td class="vert_sect">{{opp_pts[tm.id].get(1, '')|safe}}</td>
              {% for rnd in range(2, rnds + 1) %}
              <td>{{opp_pts[tm.id].get(rnd, '')|safe}}</td>
              {% endfor %}
              <td class="vert_sect">{{fmt_stat(tm.tourn_win_pct)|safe}}</td>
              <td>{{fmt_stat(tm.tourn_pts_pct)|safe}}</td>
              <td>{{fmt_stat(tm.div_rank)|safe}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endfor %}
      {% endif %}
    </div>
  </body>

  <script src="/static/jquery-3.7.1.min.js"></script>
  <script>
   $(function() {
     // document ready
   });
  </script>
</html>
