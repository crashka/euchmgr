<!DOCTYPE html>
<html>
  <head>
    <title>{{title}}</title>

    <style>
     .red {
       background-color: #FFECEC;
     }
     .container {
       margin-top: 2.0rem;
       overflow: hidden;
     }
     .container_lbl {
       font-size: larger;
       font-weight: bold;
     }
     .section {
       margin-top: 2.0rem;
       overflow-x: auto;
       white-space: nowrap;
     }
     .seed_bracket {
       width: 100em;
     }
     .seed_scores {
       width: 100em;
     }
     .rr_brackets {
       width: 100em;
     }
     .rr_scores {
       width: 100em;
     }
     table {
       border: 2px solid darkgrey;
       border-collapse: collapse;
     }
     th, td {
       border: 1px solid darkgrey;
       border-collapse: collapse;
       padding: 0.75em;
       text-align: center;
     }
     .hor_sect {
       border-bottom: 2px solid darkgrey;
     }
     .vert_sect {
       border-left: 2px solid darkgrey;
     }
     .plyr_lbl {
       text-align: left;
       width: 10em;
     }
     .tally {
       vertical-align: bottom;
     }
     b {
       font-weight: bold;
       color: {{bold_color or "black"}};
     }
     u {
       text-decoration: solid underline grey 2px;
     }
    </style>
  </head>

  <body>
    <div class="container">
      <span class="container_lbl">{{tourn_name}} &ndash; {{title}}</span>
      {% if poster_num == 0 %}
      <div class="section seed_bracket">
        <table>
          <thead>
            <tr>
              <th class="hor_sect">Round</th>
              <th class="hor_sect vert_sect">Table 1</th>
              {% for tbl in range(2, rnd_tables + 1) %}
              <th class="hor_sect">Table {{tbl}}</th>
              {% endfor %}
              <th class="hor_sect">Bye(s)</th>
            </tr>
          </thead>
          <tbody>
            {% for rnd in range(1, seed_rnds + 1) %}
            <tr>
              <td>{{rnd}}</td>
              <td class="vert_sect">{{matchups[rnd][1]|safe}}</td>
              {% for tbl in range(2, rnd_tables + 1) %}
              <td>{{matchups[rnd][tbl]|safe}}</td>
              {% endfor %}
              {# the following just happens to render as "None" if no byes #}
              <td>{{matchups[rnd].get(None)|safe}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endif %}
      {% if poster_num == 1 %}
      <div class="section seed_scores">
        <table>
          <thead>
            <tr>
              <th class="plyr_lbl hor_sect" rowspan="2">Player (by num)</th>
              <th class="hor_sect" rowspan="2">Wins</th>
              <th class="hor_sect" rowspan=2>Losses</th>
              <th class="vert_sect" colspan="{{seed_rnds}}">Points For (by round)</th>
              <th class="vert_sect" colspan="{{seed_rnds}}">Points Against (by round)</th>
            </tr>
            <tr>
              <th class="hor_sect vert_sect">1</th>
              {% for rnd in range(2, seed_rnds + 1) %}
              <th class="hor_sect">{{rnd}}</th>
              {% endfor %}
              <th class="hor_sect vert_sect">1</th>
              {% for rnd in range(2, seed_rnds + 1) %}
              <th class="hor_sect">{{rnd}}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for pl in players %}
            <tr>
              <td class="plyr_lbl">{{pl.player_tag|safe}}</td>
              <td class="tally"><img {{win_tallies[pl.player_num]|safe}} /></td>
              <td class="tally"><img {{loss_tallies[pl.player_num]|safe}} /></td>
              <td class="vert_sect">{{team_pts[pl.player_num][1]|safe}}</td>
              {% for rnd in range(2, seed_rnds + 1) %}
              <td>{{team_pts[pl.player_num][rnd]|safe}}</td>
              {% endfor %}
              <td class="vert_sect">{{opp_pts[pl.player_num][1]|safe}}</td>
              {% for rnd in range(2, seed_rnds + 1) %}
              <td>{{opp_pts[pl.player_num][rnd]|safe}}</td>
              {% endfor %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endif %}
    </div>
  </body>

  <script src="/static/jquery-3.7.1.min.js"></script>
  <script src="/static/datatables.min.js"></script>
  <script>
   $(function() {
     // document ready
   });
  </script>
</html>
